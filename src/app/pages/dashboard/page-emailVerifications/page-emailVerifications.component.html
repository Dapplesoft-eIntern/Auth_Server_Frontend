<div class="min-h-screen p-5 pt-20">
  <h2 class="text-2xl font-bold mb-6 text-gray-800">Email Verification Tokens</h2>

  <div class="bg-white border border-gray-300 rounded shadow overflow-hidden">


    <p-table [value]="tokens" [paginator]="true" [rows]="10" class="p-datatable-striped p-datatable-gridlines">

      <ng-template pTemplate="header">
        <tr class="bg-gray-800 text-white">
          <th class="px-4 py-2 text-left">ID</th>
          <th class="px-4 py-2 text-left">User ID</th>
          <th class="px-4 py-2 text-left">Token</th>
          <th class="px-4 py-2 text-left">Expires At</th>
          <th class="px-4 py-2 text-left">Verified At</th>
          <th class="px-4 py-2 text-left">Status</th>
          <th class="px-4 py-2 text-left">Action</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-token>
        <tr class="hover:bg-gray-50 transition">
          <td class="px-4 py-2">{{ token.id }}</td>
          <td class="px-4 py-2">{{ token.user_id }}</td>

          <td class="px-4 py-2 truncate max-w-[200px]">
            {{ token.token }}
          </td>

          <td class="px-4 py-2">
            {{ token.expires_at | date:'short' }}
          </td>

          <td class="px-4 py-2">
            {{ token.verified_at ? (token.verified_at | date:'short') : 'Not Verified' }}
          </td>

          <td class="px-4 py-2">
            <span class="px-2 py-1 rounded-full text-xs font-semibold" [ngClass]="{
                'bg-green-500 text-white': token.verified_at,
                'bg-red-500 text-white': !token.verified_at
              }">
              {{ token.verified_at ? 'Verified' : 'Pending' }}
            </span>
          </td>

          <td class="px-4 py-2">
            <button *ngIf="!token.verified_at" pButton type="button" label="Verify" class="p-button-sm p-button-info"
              (click)="verify(token.id)"></button>
          </td>
        </tr>
      </ng-template>

    </p-table>

  </div>
</div>

<p-toast></p-toast>