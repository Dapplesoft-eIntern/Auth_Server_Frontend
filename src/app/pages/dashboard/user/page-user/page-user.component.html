<div class="min-h-screen p-5 pt-20 text-black">

  <div class="flex justify-between items-center mb-4">
    <h2 class="text-2xl font-bold text-gray-800">User List</h2>
    <button pButton type="button" label="Add User" icon="pi pi-plus" class="p-button-success"
      (click)="openAddDialog()"></button>
  </div>



  <div class="bg-white border border-gray-300 rounded shadow overflow-hidden">
    <p-table [value]="users" [paginator]="true" [rows]="10" class="p-datatable-striped p-datatable-gridlines">
      <ng-template pTemplate="header">
        <tr class="bg-gray-800 text-white">
          <th>ID</th>
          <th>Name</th>
          <th>Email</th>
          <th>Role</th>
          <th>Actions</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-user>
        <tr class="hover:bg-gray-50 transition">
          <td>{{ user.id }}</td>
          <td>{{ user.name }}</td>
          <td>{{ user.email }}</td>
          <td>
            <span class="px-2 py-1 rounded-full text-xs font-semibold" [ngClass]="{
                'bg-green-500 text-white': user.role === 'Admin',
                'bg-blue-500 text-white': user.role === 'Manager',
                'bg-gray-200 text-gray-800': !user.role || user.role === 'User'
              }">
              {{ user.role || 'User' }}
            </span>
          </td>
          <td class="flex gap-2">
            <button pButton type="button" class="p-button-sm p-button-info" (click)="openEditDialog(user)">Edit</button>
            <button pButton type="button" class="p-button-sm p-button-danger" (click)="deleteUser(user)">Delete</button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>



  <p-dialog header="{{ isEdit ? 'Edit User' : 'Add User' }}" [(visible)]="displayDialog" [modal]="true"
    [closable]="true" [style]="{width: '400px'}" [baseZIndex]="10000">

    <div class="p-fluid space-y-4">

      <div class="p-field flex flex-col">
        <label for="name" class="font-semibold text-gray-700 mb-1">Name</label>
        <input id="name" type="text" pInputText [(ngModel)]="selectedUser.name"
          class="p-inputtext p-component border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400">
      </div>


      <div class="p-field flex flex-col">
        <label for="email" class="font-semibold text-gray-700 mb-1">Email</label>
        <input id="email" type="email" pInputText [(ngModel)]="selectedUser.email"
          class="p-inputtext p-component border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400">
      </div>


      <div class="p-field flex flex-col">
        <label for="role" class="font-semibold text-gray-700 mb-1">Role</label>
        <input id="role" type="text" pInputText [(ngModel)]="selectedUser.role"
          class="p-inputtext p-component border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400">
      </div>
    </div>


    <div class="flex justify-end gap-3 mt-6">
      <button pButton type="button" label="Cancel" class="p-button-text text-gray-600 hover:text-gray-800"
        (click)="cancelDialog()"></button>
      <button pButton type="button" label="{{ isEdit ? 'Save Change' : 'Add User' }}"
        class="p-button-succes bg-green-600 hover:bg-green-700 text-white" (click)="saveUser()"></button>
    </div>

  </p-dialog>

</div>

<p-toast></p-toast>


 