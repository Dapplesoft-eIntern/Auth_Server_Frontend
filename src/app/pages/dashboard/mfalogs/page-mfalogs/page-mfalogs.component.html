<div class="min-h-screen p-5 pt-20 text-black">
  <h2 class="text-2xl font-bold mb-4 text-gray-800">MFA Logs</h2>

  <div class="flex justify-center mb-4">

  </div>

  <div class="bg-white border border-gray-300 rounded shadow overflow-hidden">
    <p-table [value]="mfaLogs" [paginator]="true" [rows]="10" class="p-datatable-striped p-datatable-gridlines">

      <ng-template pTemplate="header">
        <tr class="bg-gray-800 text-white">
          <th>ID</th>
          <th>User</th>
          <th>Login Time</th>
          <th>IP Address</th>
          <th>Device</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-log>
        <tr class="hover:bg-gray-50 transition">
          <td>{{ log.id }}</td>
          <td>{{ log.user_name }}</td>
          <td>{{ log.login_time }}</td>
          <td>{{ log.ip_address }}</td>
          <td>{{ log.device }}</td>
          <td>
            <p-tag 
              [value]="log.status === 'success' ? 'Success' : 'Failed'" 
              [severity]="log.status === 'success' ? 'success' : 'danger'">
            </p-tag>
          </td>
          <td class="flex gap-2">
            <button pButton type="button" class="p-button-sm p-button-info" (click)="openEditDialog(log)">Edit</button>
            <button pButton type="button" class="p-button-sm p-button-danger" (click)="deleteLog(log)">Delete</button>
          </td>
        </tr>
      </ng-template>

    </p-table>
  </div>
<p-dialog header="{{ 'Edit MFA Log' }}"
          [(visible)]="dialogVisible"
          [modal]="true"
          [style]="{width: '450px', minHeight: '300px'}">

  <div class="p-fluid space-y-4">

    <div class="p-field flex flex-col">
      <label class="font-semibold">User Name</label>
      <input pInputText [(ngModel)]="editingLog.user_name" class="border rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"/>
    </div>
    <div class="p-field flex flex-col">
      <label class="font-semibold">Login Time</label>
      <input pInputText [(ngModel)]="editingLog.login_time" class="border rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"/>
    </div>
    <div class="p-field flex flex-col">
      <label class="font-semibold">IP Address</label>
      <input pInputText [(ngModel)]="editingLog.ip_address" class="border rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"/>
    </div>
    <div class="p-field flex flex-col">
      <label class="font-semibold">Device</label>
      <input pInputText [(ngModel)]="editingLog.device" class="border rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"/>
    </div>
    <div class="p-field flex flex-col">
      <label class="font-semibold">Status</label>
      <select [(ngModel)]="editingLog.status" class="p-inputtext p-component border rounded px-3 py-2 w-full">
        <option value="success">Success</option>
        <option value="failed">Failed</option>
      </select>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <button pButton type="button" label="Cancel" class="p-button-text" (click)="dialogVisible=false"></button>
    <button pButton type="button" label="{{ isAddMode ? 'Add' : 'Update' }}" class="p-button-success" (click)="saveLog()"></button>
  </ng-template>

</p-dialog>


  <p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>
</div>
